# UniversalHookX 快速开始指南

这是一个5分钟快速入门指南，帮助你快速了解和使用 UniversalHookX。

---

## 📖 什么是 UniversalHookX？

UniversalHookX 是一个通用的 Windows 图形 API 钩子工具，可以：
- ✨ 拦截和修改应用程序的图形渲染调用
- 🎮 选择性渲染特定的 3D 对象
- 🎨 将所有对象替换为纯色显示
- 🔍 分析游戏和应用的渲染管线

---

## 🚀 快速开始（3步）

### 步骤 1: 编译项目

**Windows + Visual Studio**:
```
1. 打开 UniversalHookX.sln
2. 选择 Release | x64
3. 按 Ctrl+Shift+B 编译
4. 在 bin/ 目录找到 DLL
```

**配置图形 API** (在编译前):
编辑 `src/dllmain.cpp` 第19行:
```cpp
U::SetRenderingBackend(DIRECTX11);  // 根据目标程序修改
```

### 步骤 2: 注入 DLL

**推荐工具**: Process Hacker
```
1. 下载 Process Hacker
2. 以管理员运行
3. 找到目标进程
4. 右键 → Miscellaneous → Inject DLL
5. 选择编译好的 DLL
```

**注意**: DLL 架构必须匹配目标程序（32位 ↔ 32位，64位 ↔ 64位）

### 步骤 3: 使用功能

**显示界面**:
- 按 **INSERT** 键显示/隐藏菜单

**基础操作**:
1. 勾选 "Enable Draw Call Filter"
2. 设置 "Target Draw Call" = 0
3. 逐个增加数字，观察画面变化
4. 找到目标对象的绘制调用编号

**高级操作**:
1. 启用 "Enable Solid Color Material"
2. 使用颜色选择器选择颜色
3. 所有对象会变成纯色

---

## 📚 文档目录

### 主要文档

| 文档 | 内容 | 适合人群 |
|------|------|----------|
| **README_CN.md** | 完整项目文档 | 所有用户 |
| **BUILD_GUIDE_CN.md** | 编译详细步骤 | 开发者 |
| **USAGE_GUIDE_CN.md** | 使用教程和案例 | 使用者 |
| **TECHNICAL_ARCHITECTURE_CN.md** | 技术架构 | 高级开发者 |
| **CHANGES_SUMMARY_CN.md** | 修改总结 | 贡献者 |

### 推荐阅读顺序

**新手** (想快速使用):
```
1. 本文档（快速开始.md）
2. README_CN.md - "使用说明"章节
3. USAGE_GUIDE_CN.md - "快速入门"章节
```

**开发者** (想编译和修改):
```
1. BUILD_GUIDE_CN.md - 完整编译指南
2. TECHNICAL_ARCHITECTURE_CN.md - 理解架构
3. CHANGES_SUMMARY_CN.md - 了解最新修改
```

**研究者** (想深入理解):
```
1. TECHNICAL_ARCHITECTURE_CN.md - 技术原理
2. README_CN.md - "技术原理"章节
3. USAGE_GUIDE_CN.md - "进阶技巧"章节
```

---

## 🎯 核心功能

### 1️⃣ 绘制调用过滤器

**作用**: 只显示特定的 3D 对象

**使用场景**:
- 🎮 在游戏中定位特定敌人
- 📊 分析哪个对象消耗最多性能
- 🔍 逆向工程游戏渲染

**示例**:
```
场景有100个绘制调用:
- DC 0-20: 背景
- DC 21-40: 建筑
- DC 41-50: 角色
- DC 51-60: 武器

设置 Target DC = 45 → 只显示角色的某个部分
```

### 2️⃣ 纯色材质覆盖

**作用**: 将所有对象变成单一颜色

**使用场景**:
- 🎨 检查模型是否重叠
- 📐 分析几何体结构
- 🐛 调试 Z-Fighting 问题

**示例**:
```
选择红色 (1, 0, 0) → 所有对象变红色
选择绿色 (0, 1, 0) → 所有对象变绿色
半透明 (1, 0, 0, 0.5) → 可以看到内部结构
```

### 3️⃣ 组合使用

**最强大的功能**: 同时启用两个功能

**工作流程**:
```
1. 启用过滤器 + 纯色覆盖
2. 设置目标 DC = 0，颜色 = 红色
3. 截图并记录
4. 增加 DC，改变颜色
5. 重复直到完成所有对象
6. 创建完整的对象映射表
```

---

## 🎮 实战案例

### 案例 1: 找到游戏中的特定角色

**目标**: 让敌人显示为红色

**步骤**:
```
1. 注入 DLL 到游戏进程
2. 按 INSERT 显示菜单
3. 启用 "Draw Call Filter"
4. 从 DC = 0 开始测试
5. 找到敌人出现的 DC 编号（假设是 42）
6. 保持 DC = 42
7. 启用 "Solid Color Material"
8. 选择红色
9. 现在敌人是红色的
```

### 案例 2: 分析渲染性能

**目标**: 找出消耗性能最多的对象

**步骤**:
```
1. 记录正常情况的 FPS: 60
2. 启用 "Draw Call Filter"
3. 测试每个 DC 的 FPS:
   - DC 0-30: 60 FPS
   - DC 31-35: 45 FPS ← 性能瓶颈
   - DC 36-50: 60 FPS
4. 分析 DC 31-35 的对象
5. 优化这些对象（LOD、合并等）
```

---

## ⚙️ 常见配置

### 图形 API 识别

| 加载的 DLL | 图形 API | 设置 |
|-----------|---------|------|
| d3d9.dll | DirectX 9 | `DIRECTX9` |
| d3d11.dll | DirectX 11 | `DIRECTX11` |
| d3d12.dll | DirectX 12 | `DIRECTX12` |
| opengl32.dll | OpenGL | `OPENGL` |
| vulkan-1.dll | Vulkan | `VULKAN` |

**查看方法**:
1. Process Hacker → 找到进程
2. 右键 → Properties → Modules
3. 搜索上述 DLL

### 编译配置

| 配置 | 用途 | 特点 |
|------|------|------|
| Debug \| Win32 | 32位调试 | 有调试信息，体积大 |
| Release \| Win32 | 32位发布 | 优化，体积小 |
| Debug \| x64 | 64位调试 | 有调试信息，体积大 |
| Release \| x64 | 64位发布 | 优化，体积小 |

**推荐**:
- 开发测试: `Debug | x64`
- 正式使用: `Release | x64` 和 `Release | Win32`

---

## ❗ 注意事项

### ⚠️ 安全警告

**可以做**:
- ✅ 学习图形编程
- ✅ 分析单机游戏
- ✅ 调试自己的程序
- ✅ 游戏模组开发

**不要做**:
- ❌ 在线游戏作弊
- ❌ 绕过反作弊系统
- ❌ 未经授权修改软件
- ❌ 商业用途（未授权）

### 🐛 常见问题

**Q: 注入后控制台立即关闭？**
```
A: 检查图形 API 设置是否正确
   使用 Process Hacker 查看目标程序加载的 DLL
```

**Q: 按 INSERT 没反应？**
```
A: 1. 按 HOME 键重新钩取
   2. 检查控制台是否有错误信息
   3. 确认 DLL 架构匹配（32位/64位）
```

**Q: 过滤器不生效？**
```
A: 1. 确认 Current Draw Call 有变化
   2. 尝试不同的 Target DC 值
   3. 某些程序可能使用不同的绘制函数
```

**Q: 材质覆盖不显示？**
```
A: 1. 确认复选框已勾选
   2. 尝试不同的颜色（避免黑色）
   3. 设置 Alpha = 1.0（完全不透明）
```

**Q: 游戏崩溃？**
```
A: 1. 关闭其他覆盖层（MSI Afterburner等）
   2. 不要在有反作弊的游戏中使用
   3. 使用 Debug 版本查看错误信息
```

---

## 🔧 快速调试

### 控制台日志

注入成功后，控制台会显示:
```
[+] Rendering backend: DIRECTX11
[+] DirectX11: g_pd3dDevice: 0x...
[+] DirectX11: g_pSwapChain: 0x...
[+] DirectX11: Draw call hooks enabled.
```

如果看到错误:
```
[!] DirectX11 backend is not enabled!
→ 检查 backend.hpp 配置

[!] CreateDeviceD3D11() failed.
→ 目标程序可能不是 DX11

[!] Looks like you forgot to set a backend.
→ 检查 dllmain.cpp 中的 SetRenderingBackend()
```

### 快速测试

**测试步骤**:
```
1. 找一个简单的 DX11 示例程序
2. 编译 Release x64 版本
3. 注入 DLL
4. 验证控制台输出 ✓
5. 按 INSERT 键 ✓
6. 菜单显示 ✓
7. 启用过滤器，测试不同 DC ✓
8. 启用材质覆盖，测试不同颜色 ✓
```

---

## 📞 获取帮助

### 文档链接

详细问题请查看完整文档:

- **使用问题**: USAGE_GUIDE_CN.md
- **编译问题**: BUILD_GUIDE_CN.md
- **技术问题**: TECHNICAL_ARCHITECTURE_CN.md
- **一般问题**: README_CN.md

### 社区支持

- **GitHub Issues**: 报告 Bug
- **GitHub Discussions**: 交流经验
- **技术论坛**: 搜索类似问题

### 提问技巧

提问时请提供:
1. Windows 版本
2. 目标程序名称
3. DLL 版本（32位/64位）
4. 图形 API 设置
5. 完整的错误信息
6. 控制台日志截图

---

## 🎓 学习路径

### 初级（1-2天）

**目标**: 能够使用基本功能

学习内容:
- 如何编译项目
- 如何注入 DLL
- 如何使用绘制调用过滤器
- 如何使用材质覆盖

推荐文档:
- 本文档
- USAGE_GUIDE_CN.md（快速入门部分）

### 中级（3-7天）

**目标**: 深入理解并分析游戏

学习内容:
- 图形 API 基础知识
- 钩子技术原理
- 实战案例分析
- 性能优化技巧

推荐文档:
- USAGE_GUIDE_CN.md（完整）
- README_CN.md（技术原理）

### 高级（1-2周）

**目标**: 修改代码添加新功能

学习内容:
- DirectX 编程
- 钩子实现细节
- 着色器编程
- 添加自定义功能

推荐文档:
- TECHNICAL_ARCHITECTURE_CN.md
- CHANGES_SUMMARY_CN.md
- 源代码注释

---

## ✨ 下一步

现在你已经了解了基础知识，可以:

1. **立即开始**: 按照"快速开始"编译和测试
2. **深入学习**: 阅读完整的 USAGE_GUIDE_CN.md
3. **参与开发**: 阅读 TECHNICAL_ARCHITECTURE_CN.md
4. **分享经验**: 在社区中交流你的发现

---

## 📊 功能对照表

| 功能 | 用途 | 难度 | 效果 |
|------|------|------|------|
| 绘制调用过滤器 | 隔离特定对象 | ⭐⭐ | 🔥🔥🔥 |
| 材质覆盖 | 分析几何结构 | ⭐ | 🔥🔥 |
| 组合使用 | 完整对象映射 | ⭐⭐⭐ | 🔥🔥🔥🔥🔥 |

---

## 🎉 总结

UniversalHookX 是一个强大的图形分析工具，适合:
- 🎓 学习图形编程的学生
- 🔬 研究游戏技术的开发者
- 🐛 调试图形问题的工程师
- 🛠️ 开发游戏模组的创作者

**记住**:
- 仅用于学习和研究
- 不要在线游戏中使用
- 遵守法律和服务条款
- 负责任地使用

**开始你的图形分析之旅吧！** 🚀

---

**最后更新**: 2025-10-03  
**版本**: 2.0  
**维护**: UniversalHookX 社区

📖 完整文档: README_CN.md  
🔧 技术支持: GitHub Issues  
💬 交流讨论: GitHub Discussions
